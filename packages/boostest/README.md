# boostest🚀🚀🚀

Instantly generate test data from TypeScript `type`, `interface`, or `class` 🤖

## TL;DR

- Instantly create test data from TypeScript `type`, `interface`, or `class` 📝
- Partially overwrite test data in `type` or `interface` 🏗️
- Test data is output as actual code, becoming a user asset 💸

<br />

https://github.com/MasatoDev/boostest/assets/46220963/16d43dd8-d194-42e0-9039-5b7f205ba15f

<br />

## Installation⬇️

```Bash
# global
npm install -g boostest

# repo
npm install --save-dev boostest
pnpm add -D boostest
yarn add -D boostest
```

<br />

## Basic Usage 🚀🚀

Define a function using `type` or `interface`

```ts
import {GetUserRes} form "...";

const testData = boostestGetUserRes<GetUserRes>();
```

Run the command to auto-generate `boostestGetUserRes` which returns test data


```bash
npx boostest [target_file_path]
```

or

```bash
touch boostest.setting.json
# and add settings to this file.

npx boostest
```

Upon successful command execution, a file containing code like the following will be output in the same directory as the target file.

```ts
export function boostestGetUserRes<T>(args?: Partial<T>): T {
  return ({
    'statusCode':'200',
    'body':'test data string',
    ...args
  } as T);
}
```

The generated test data can be partially overwritten by providing values to the arguments of `boostestGetUserRes`.

```ts
import {GetUserRes} form "...";

const testData = boostestGetUserRes<GetUserRes>({ statusCode: "503" });
```

<br />

## Detailed Usage and Explanation 🔧

`boostest [file path]` creates test data for functions containing `boostest` within the target file.
Functions like `boostestHoge`, `boostestTest` are targeted. (The name boostest can be changed in `boostest.setting.json`)

The test data to be created is specified by Generics as `type`, `interface`, or `typeof ClassName`.

```ts
import { User } from './class/user';
import { boostestRes, boostestUserClass, boostestUserRes } from './demo_test_data';

type Res = {
  statusCode: '200' | '400' | '500';
  body: string;
};

interface UserRes {
  name: string;
  age: number;
}

const testData1 = boostestRes<Res>();
const testData2 = boostestUserRes<UserRes>();
const testDataInstance = boostestUserClass<typeof User>(User);


console.log('testData1', testData1);
// testData1 { statusCode: '200', body: 'test data string' }
console.log('testData2', testData2);
// testData2 { name: 'test data string', age: 42 }
console.log('testDataInstance', testDataInstance);
// testDataInstance User { name: 'string_val', age: 42 }
```

<br />

Functions like `boostestRes` are auto-generated by the command, so there is no need to define them beforehand.

For Class, the Generics part needs to be like `typeof ClassName`, and the `Class` entity is passed as the first argument.
The test data is an instance initialized with arbitrary values.

For `type` and `interface`, values can be partially overwritten by passing them as arguments.

※ Single values like `type age = number` are not supported, as creating test data for them is not time-consuming.

## boostest.setting.json

Creating `boostest.setting.json` is convenient for specifying multiple files with glob, etc.

```json
{
  "target_pattern": ["src/**/*.ts"],
  "name": "boostest",
  "out_file_name": "test_data",
  "tsconfig": "./tsconfig.json"
}
```

### target_pattern

Specify the target files in glob format.

Two files are targeted

```json
"target_pattern": ["src/example.ts", "src/hoge.ts"]
```

ts files in src are targeted

```json
"target_pattern": ["src/**/*.ts"],
```

### name

Normally, functions containing `boostest` like the following are targeted, but you can freely change it using name.

```ts
// boostest[FreeName]<[TypeName or InterfaceName]>();
const testData = boostestTestData<TypeName>();
```

If you set name as follows, functions containing `hog`e will be targeted.

```ts
// "name": "hoge",
const testData = hogeTestData<TypeName>();
```

### out_file_name

Normally, when you run the boostest command, the test data is written to a new file and saved with the name `[target file name]_boostest.ts`.
By specifying `out_file_name`, you can change the boostest part to something like `[target file name]_[out_file_name].ts`.

The test files are created in the same directory as the target files respectively.

### tsconfig
Specify the path to `tsconfig.json`.
This is useful for module resolution, such as being able to use aliases like `import {hoge} from "@alias/somethis..."`.

<br />

## Additional Notes ⚠️

Boostest is currently in beta.
The basic functionality has been implemented, but the code provided from node_modules is a mix of ESM, Commonjs, and other notations, and is not perfectly covered.
Boostest basically supports ESM.

Also, at this time, the coverage of type kinds when generating test data is not perfect.

If it's not code from node_modules, and you're not doing complex exports, you should be able to use it without any problems.
If you have any problems or feature requests, please feel free to create an ISSUE.
